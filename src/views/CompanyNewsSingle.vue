<template>
    <div class="company-news-single">
        <NavMenu/>
        <p id="company-news-single" v-html="companyNewsSingle"></p>
    </div>
</template>
<script>
import NavMenu from './NavMenu'
import axios from 'axios'
import getData from '../api/companyNewsSingle'
export default {
    data() {
        return {
            companyNewsSingle:null
        }
    },
    components:{
        NavMenu
    },
    // directives:{
    //     // 用 >>> 深度作用选择器代替这种方式。
    //     resetImgWidth:{
    //         componentUpdated: el =>{
    //             var img = el.querySelectorAll('img')
    //             for(let i = 0;i < img.length;i++){
    //                 img[i].style.width = '100%'
    //                 img[i].style.height = 'auto'
    //             }
    //         }
    //     }
    // },
    beforeRouteEnter: (to, from, next) => {
        axios.get(getData(to.params.id))
        .then(response =>{
            next(vm =>{
                vm.companyNewsSingle = response.data
            })
        })
        .catch(err =>{
            console.log(err)
        })
        // 测试数据
//         next(vm => {
//             vm.companyNewsSingle = `<p><img src="http://www.jius.net/UpFile/Img/201902/2019021215499599761752393.png" title="微信图片_20190212093040.png" alt="微信图片_20190212093040.png" width="585" height="366" style="width: 585px; height: 366px;"></p><p>新春的年味还未散去，零星的烟花，依旧会在夜晚出现，我们却无暇顾及这些，因为今天就要开工上班了！</p><p>而在这喜庆祥和的气氛中，我们与跨年未见的同事互送祝福，我们向领导或员工，致以最衷心的祝愿！</p><p>为什么大家都喜欢在初八开工呢？这其中是有讲究的！&nbsp;</p><p>中国民间取八字读音，将正月初八日演变成敬八仙节。八仙即中国民间传说中的李铁拐、汉钟离、张果老、何仙姑、蓝采和、吕洞宾、韩湘子、曹国舅八位神仙。&nbsp;</p><p>八仙过海各显神通，神通象征各自的隐喻，而八仙的法宝不仅仅是单纯的宝贝。而是其暗喻显示了易理，道教将八仙的宝贝尊为道教八宝。称作暗八仙。&nbsp;</p><p>除此之外，八仙又暗喻了男、女、老、少、富、贵、贫、贱，皆可成仙。&nbsp;</p><p>所以正月初八，敬八仙节。更适合开市、开业、开工等，寓意大吉大利之意。</p><p>新的一年，新的梦想，新的愿望，新的征程！</p><p>在美好的寓意里，在相互的祝福里，我们开始了新一年的工作。&nbsp;</p><p>回首过去的一年，我们有所得，有所失；有经验，有教训；有成功，亦有失败；但这些都已成为过往云烟！</p><p>春节终究是属于孩子们的欢乐，大人们则满怀心事，拖着疲惫的身子，坚持着每天的饭局，酒场，还有家人好友的关爱、唠叨与规劝。</p><p>当初八这一天到来的时候，一切的烦恼与忧愁，一切的不忿与无奈，都应在你走进办公室的那一刻，消失殆尽！&nbsp;</p><p>对着镜子，补一下妆容，整一下衣服，以全新的姿态，迎接新一年的挑战！</p><p>告诉自己，你是最棒的那一个！&nbsp;</p><p>相信自己，用自信去迎接每一天！</p><p>初八开工，诸事大吉，让我们的梦想，再度启航！</p>
// <st-div id="__selection-translator__"> <st-div class="__st-box__" style="display: none; position: fixed; z-index: 99999; left: 0px; top: 0px; transform: translateX(2px) translateY(93.6px);"> <st-header> <st-span class="st-icon-pin" title="固定"></st-span> <st-span class="st-icon-down-open" title="展开"></st-span> <st-span class="st-icon-cog" title="设置"></st-span> </st-header> <st-div class="__query-form__" style="display: none;"> <st-div> <textarea placeholder="输入要翻译的句子或单词"></textarea> </st-div> <st-div> <select> <option value="">自动判断</option> <option value="zh">中文</option><option value="zh-CN">中文(简体)</option><option value="zh-HK">中文(香港)</option><option value="zh-TW">中文(繁体)</option><option value="en">英语</option><option value="ja">日语</option><option value="ko">朝鲜语</option><option value="de">德语</option><option value="fr">法语</option><option value="ru">俄语</option><option value="th">泰语</option><option value="af">南非语</option><option value="ar">阿拉伯语</option><option value="az">阿塞拜疆语</option><option value="be">比利时语</option><option value="bg">保加利亚语</option><option value="ca">加泰隆语</option><option value="cs">捷克语</option><option value="cy">威尔士语</option><option value="da">丹麦语</option><option value="dv">第维埃语</option><option value="el">希腊语</option><option value="eo">世界语</option><option value="es">西班牙语</option><option value="et">爱沙尼亚语</option><option value="eu">巴士克语</option><option value="fa">法斯语</option><option value="fi">芬兰语</option><option value="fo">法罗语</option><option value="gl">加里西亚语</option><option value="gu">古吉拉特语</option><option value="he">希伯来语</option><option value="hi">印地语</option><option value="hr">克罗地亚语</option><option value="hu">匈牙利语</option><option value="hy">亚美尼亚语</option><option value="id">印度尼西亚语</option><option value="is">冰岛语</option><option value="it">意大利语</option><option value="ka">格鲁吉亚语</option><option value="kk">哈萨克语</option><option value="kn">卡纳拉语</option><option value="kok">孔卡尼语</option><option value="ky">吉尔吉斯语</option><option value="lt">立陶宛语</option><option value="lv">拉脱维亚语</option><option value="mi">毛利语</option><option value="mk">马其顿语</option><option value="mn">蒙古语</option><option value="mr">马拉地语</option><option value="ms">马来语</option><option value="mt">马耳他语</option><option value="nb">挪威语(伯克梅尔)</option><option value="nl">荷兰语</option><option value="ns">北梭托语</option><option value="pa">旁遮普语</option><option value="pl">波兰语</option><option value="pt">葡萄牙语</option><option value="qu">克丘亚语</option><option value="ro">罗马尼亚语</option><option value="sa">梵文</option><option value="se">北萨摩斯语</option><option value="sk">斯洛伐克语</option><option value="sl">斯洛文尼亚语</option><option value="sq">阿尔巴尼亚语</option><option value="sv">瑞典语</option><option value="sw">斯瓦希里语</option><option value="syr">叙利亚语</option><option value="ta">泰米尔语</option><option value="te">泰卢固语</option><option value="tl">塔加路语</option><option value="tn">茨瓦纳语</option><option value="tr">土耳其语</option><option value="ts">宗加语</option><option value="tt">鞑靼语</option><option value="uk">乌克兰语</option><option value="ur">乌都语</option><option value="uz">乌兹别克语</option><option value="vi">越南语</option><option value="xh">班图语</option><option value="zu">祖鲁语</option> </select> <st-div class="__exchange__"> <st-span class="st-icon-exchange"></st-span> </st-div> <select> <option value="">自动选择</option> <option value="zh">中文</option><option value="zh-CN">中文(简体)</option><option value="zh-HK">中文(香港)</option><option value="zh-TW">中文(繁体)</option><option value="en">英语</option><option value="ja">日语</option><option value="ko">朝鲜语</option><option value="de">德语</option><option value="fr">法语</option><option value="ru">俄语</option><option value="th">泰语</option><option value="af">南非语</option><option value="ar">阿拉伯语</option><option value="az">阿塞拜疆语</option><option value="be">比利时语</option><option value="bg">保加利亚语</option><option value="ca">加泰隆语</option><option value="cs">捷克语</option><option value="cy">威尔士语</option><option value="da">丹麦语</option><option value="dv">第维埃语</option><option value="el">希腊语</option><option value="eo">世界语</option><option value="es">西班牙语</option><option value="et">爱沙尼亚语</option><option value="eu">巴士克语</option><option value="fa">法斯语</option><option value="fi">芬兰语</option><option value="fo">法罗语</option><option value="gl">加里西亚语</option><option value="gu">古吉拉特语</option><option value="he">希伯来语</option><option value="hi">印地语</option><option value="hr">克罗地亚语</option><option value="hu">匈牙利语</option><option value="hy">亚美尼亚语</option><option value="id">印度尼西亚语</option><option value="is">冰岛语</option><option value="it">意大利语</option><option value="ka">格鲁吉亚语</option><option value="kk">哈萨克语</option><option value="kn">卡纳拉语</option><option value="kok">孔卡尼语</option><option value="ky">吉尔吉斯语</option><option value="lt">立陶宛语</option><option value="lv">拉脱维亚语</option><option value="mi">毛利语</option><option value="mk">马其顿语</option><option value="mn">蒙古语</option><option value="mr">马拉地语</option><option value="ms">马来语</option><option value="mt">马耳他语</option><option value="nb">挪威语(伯克梅尔)</option><option value="nl">荷兰语</option><option value="ns">北梭托语</option><option value="pa">旁遮普语</option><option value="pl">波兰语</option><option value="pt">葡萄牙语</option><option value="qu">克丘亚语</option><option value="ro">罗马尼亚语</option><option value="sa">梵文</option><option value="se">北萨摩斯语</option><option value="sk">斯洛伐克语</option><option value="sl">斯洛文尼亚语</option><option value="sq">阿尔巴尼亚语</option><option value="sv">瑞典语</option><option value="sw">斯瓦希里语</option><option value="syr">叙利亚语</option><option value="ta">泰米尔语</option><option value="te">泰卢固语</option><option value="tl">塔加路语</option><option value="tn">茨瓦纳语</option><option value="tr">土耳其语</option><option value="ts">宗加语</option><option value="tt">鞑靼语</option><option value="uk">乌克兰语</option><option value="ur">乌都语</option><option value="uz">乌兹别克语</option><option value="vi">越南语</option><option value="xh">班图语</option><option value="zu">祖鲁语</option> </select> </st-div> <st-div> <select> <option value="YouDao">有道翻译</option> <option value="BaiDu">百度翻译</option> <option value="Google">谷歌翻译</option> <option value="GoogleCN">谷歌翻译（国内）</option> </select> <st-div class="__action-list__"> <st-div class="__button__ __btn-translate__">翻译 <st-span class="st-icon-down-dir"></st-span> </st-div> <st-div class="__expand__"> <st-div class="__button__">朗读</st-div> <st-div class="__button__">复制</st-div> </st-div> </st-div> </st-div> </st-div> <st-div class="__translate-result__" style="display: none;">正在查询，请稍候……</st-div> <st-div class="__translate-result__"> <st-div style="display: none;"> <st-span></st-span> <st-span class="__retry__">重试</st-span> </st-div> <st-div> <st-div class="__phonetic__"> <st-span style="display: none;"></st-span> <st-span class="__copy-and-read__"> <st-span>朗读</st-span> <st-span style="display: none;">复制</st-span> </st-span> </st-div> <st-div style="display: none;"> <st-ul>  </st-ul> <st-div class="__copy-and-read__"> <st-span class="__copy-and-read__">复制</st-span> </st-div> </st-div> <st-div style="display: none;">  <st-div class="__copy-and-read__"> <st-span class="__copy-and-read__">朗读</st-span> <st-span class="__copy-and-read__">复制</st-span> </st-div> </st-div> </st-div> </st-div> <st-footer> <st-span style="">via <a target="_blank" href="">百度翻译</a></st-span> </st-footer> </st-div> <st-div class="__st-btn__" style="display: block; position: fixed; z-index: 99999; left: 0px; top: 0px; transform: translateX(2px) translateY(93.6px);">译</st-div> </st-div>`
//         })
    },
    // updated() {
    //     //更改图片尺寸：数据库存储的模板中图片是行内样式，渲染后优先级高于全局样式，在数据更新时，重置img样式。
    //     var div = document.getElementById('company-news-single')
    //     var img = div.querySelectorAll('img')
    //     console.log(img)
    //     for(let i = 0;i < img.length;i++){
    //         console.log('i:'+i)
    //         img[i].style.width = '100%'
    //         img[i].style.height = 'auto'
    //     }
    // },
}
</script>
<style lang="css" scoped>
    .company-news-single{
        margin-top: 46px;
        width: 100%;
    }
    p{
        text-align: left;
    }
    #company-news-single >>> img{
        width: 100% !important;
        height: auto !important;
    }
</style>